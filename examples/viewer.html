<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="description" content="">
	<meta name="author" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<title>Potree Viewer</title>
</head>

<body>
	<script src="../node_modules/@zeainc/zea-engine/dist/zea-engine.js"></script>
	<!-- <script src="../build/potree/potree.js"></script> -->
	<script src="../dist/zea-potree.js"></script>
	<div id="potree_container" style="position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; ">
	</div>
	
	<script>
	
		const scene = new ZeaEngine.Scene();
		scene.setupGrid(600, 50);

		const renderer = new ZeaEngine.GLRenderer(document.getElementById("potree_container"), {
			enableTextures:false
		});
		const potreePass = new ZeaPotree.GLPotreePass();
		// potreePass.setPointBudget(1*1000*1000);
		renderer.addPass(potreePass, ZeaEngine.PassType.OPAQUE);
		renderer.setScene(scene);
		renderer.resumeDrawing();

		const potreeAsset = new ZeaPotree.PotreeAsset();
		scene.getRoot().addChild(potreeAsset);
		
		// Load and add point cloud to scene
		let url;
		// url = "../pointclouds/vol_total/cloud.js"
		// url = "http://localhost:3150/PotreeConverter/NavVisHQ/sources.json"
		// url = "http://5.9.65.151/mschuetz/potree/resources/pointclouds/pix4d/eclepens/cloud.js"
		// url = "http://www.kkapc.co.jp/potree-1.5RC/pointclouds/apc_tatumi/cloud.js" // No CORS
		// url = "http://www.airborneresearch.com.au/potree/pointclouds/Ironbank/cloud.js" // No CORS
		// url = "http://5.9.65.151/mschuetz/potree/resources/pointclouds/3dlasermapping/whitby/cloud.js"
		// url = "http://5.9.65.151/mschuetz/potree/resources/pointclouds/faro/westend_palais/cloud.js"
		// url = "http://localhost:3150/PotreeConverter/out/NEONDSSampleLiDARPointCloud/cloud.js"
		// url = "http://localhost:3150/PotreeConverter/out/NavVisHQ/cloud.js"
		url = "http://betaserver.icgc.cat/potree12/resources/pointclouds/templesagradafamilia/cloud.js"
		potreeAsset.loadPointCloud(url, "PointCloud").then(e => {
	
			// let material = e.pointcloud.material;
			// material.size = 1;
			// material.pointSizeType = Potree.PointSizeType.ADAPTIVE;
			// material.shape = Potree.PointShape.SQUARE;
			
			
			//scene.view.position.set(589974.341, 231698.397, 986.146);
			//scene.view.lookAt(new THREE.Vector3(589851.587, 231428.213, 715.634));
			renderer.frameAll();
			
			potreePass.setViewport(renderer.getViewport());

			// setTimeout(()=>{
			// 	potreeAsset.addHighlight('fppp', new ZeaEngine.Color(1,0.6,0.8, 0.1));
			// }, 3000);
		});
		


	</script>
	
	
  </body>
</html>
